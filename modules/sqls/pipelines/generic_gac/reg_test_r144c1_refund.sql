--           *****************
--           **** READ ME ****
--           *****************
-- Generated by Auth Copy Tool Version: 1.1.0_upd
-- Execute Fully using Golden, SQL PLUS or equivalent. An input prompt will pop up and the Date of the Auth must be inputted
-- The Date of the Auth will affect when it can be processed. Ideally it should be set as Posting Date - 1
-- The Terminal ID is updated with the provided date - 1 day so that POS NT Loader can be processed immediately.
-- This script can be re-executed again and again to reset the authorisations and terminals so you can re-execute POS NT Loader as needed.
-- Kindly open the DBMS OUTPUT Window if running in Golden as the logs will be placed there.
-- In case this script fails, the basic error handling should log the error and line number in the same DBMS Output Window
Declare
  v_date Varchar2(8) := '20221210';
Begin
  DELETE FROM COS_EMV_LOG WHERE BPR_LOG_ID = 540451162;
  DELETE FROM COS_RISK_LOG WHERE TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087' AND INSTITUTION_NUMBER = '00000111';
  DELETE FROM COS_BPR_DATA WHERE BPR_LOG_ID = 540451163 and INSTITUTION_NUMBER = '00000111' and STAN = '508621';
  DELETE FROM COS_BPR_LOG WHERE BPR_LOG_ID = 540451163;
  DELETE FROM COS_EMV_LOG WHERE BPR_LOG_ID = 540451163;
  DELETE FROM COS_RISK_LOG WHERE TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087' AND INSTITUTION_NUMBER = '00000111';
  DELETE FROM COS_BPR_DATA WHERE BPR_LOG_ID = 540451164 and INSTITUTION_NUMBER = '00000111' and STAN = '508621';
  DELETE FROM COS_BPR_LOG WHERE BPR_LOG_ID = 540451164;
  DELETE FROM COS_EMV_LOG WHERE BPR_LOG_ID = 540451164;
  DELETE FROM COS_RISK_LOG WHERE TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087' AND INSTITUTION_NUMBER = '00000111';
  DELETE FROM COS_BPR_LOG WHERE BPR_LOG_ID = 540451162;
  DELETE FROM COS_BPR_DATA WHERE BPR_LOG_ID = 540451162 and INSTITUTION_NUMBER = '00000111' and STAN = '000825';
  DELETE FROM COS_BPR_DATA WHERE BPR_LOG_ID = 540451165 and INSTITUTION_NUMBER = '00000111' and STAN = '000825';
  DELETE FROM COS_RISK_LOG WHERE TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087' AND INSTITUTION_NUMBER = '00000111';
  DELETE FROM COS_EMV_LOG WHERE BPR_LOG_ID = 540451165;
  DELETE FROM COS_BPR_LOG WHERE BPR_LOG_ID = 540451165;
  Commit;
  INSERT INTO COS_BPR_DATA (BPR_LOG_ID, RECORD_DATE, BPR_TYPE_NAME, BW3_RECORD_DATE, BW3_RECORD_TIME, INSTITUTION_NUMBER, TRANSACTION_ID_OLD, TRANSACTION_LINK_ID_OLD, MESSAGE_TYPE, TRANSACTION_DATE, TRANSMISSION_DATE, RETRIEVAL_REFERENCE, STAN, ACQUIRING_INST_ID, FORWARDING_INST_ID, TRANSACTION_STATUS, NETWORK_ID, BATCH_ID, CARD_NUMBER, EXPIRY_DATE, PROCESS_CODE, MCC_CODE, TRACK_2_DATA, TERMINAL_ID, RESPONSE_CODE, RESPONSE_DATA, AUTH_CODE, BILLING_CURRENCY, BILLING_AMOUNT, SETTLEMENT_CURRENCY, SETTLEMENT_AMOUNT, REQUESTED_CURRENCY, REQUESTED_AMOUNT, SETTLEMENT_RATE, SETTLEMENT_DATE, SETTLEMENT_RATE_DATE, SETTLEMENT_FEE, PROCESSING_FEE, POS_ENTRY, POS_DATA, INF_DATA, ORIGINAL_DATA, REPLACEMENT_AMOUNT, REASON_CODE, MERCHANT_ID, MERCHANT_NAME, ECOM_SECURITY_LEVEL, CVC_INVALID, CASHBACK_AMOUNT, EXTERNAL_REF, TRANSACTION_ID, TRANSACTION_LINK_ID, HOSTNAME, RESPONSE_CODE_INTERNAL, CLEARING_STATUS, STATISTIC_STATUS) 
   Values(540451162, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:27','YYYYMMDD HH24:MI:SS'), 'BPR_HST_ISS',NVL(TRIM(v_date), '20221128'),'10:24:27','00000111', 0, 0, '0200', TO_DATE(NVL(TRIM(v_date), '20221128') || ' 10:24:27','YYYYMMDD HH24:MI:SS'), TO_DATE(NVL(TRIM(v_date), '20221128') || ' 10:24:27','YYYYMMDD HH24:MI:SS'), '332102427826','000825', '00000000111','00000000000', '999', Null, Null, '5155065300003006', '2212', '200000', '5999', '', 'E0000156', '', '', '', '', '', '', '', '978', '100.00', '', Null, Null, '', '', '012','59', '00DE52:N/DE48.43:Y/AVS_DATA:N/DE63.PY:N/DE63.AR:N/DE63.LG:N/DE63.CA:N/DE63.AD:N/DE63.IT:N/DE63.IA:N/DE63.GS:N/ECOM:210/DE60:10000000/', '','', '', '000000000000156','Pilot POS3               Musterstadt  DE', '', '','', '','63847e48-1e18591ca8-4e0087', '63847e48-1e18591ca8-4e0087', '8c756a3eca27','', '', '');
  INSERT INTO COS_BPR_DATA (BPR_LOG_ID, RECORD_DATE, BPR_TYPE_NAME, BW3_RECORD_DATE, BW3_RECORD_TIME, INSTITUTION_NUMBER, TRANSACTION_ID_OLD, TRANSACTION_LINK_ID_OLD, MESSAGE_TYPE, TRANSACTION_DATE, TRANSMISSION_DATE, RETRIEVAL_REFERENCE, STAN, ACQUIRING_INST_ID, FORWARDING_INST_ID, TRANSACTION_STATUS, NETWORK_ID, BATCH_ID, CARD_NUMBER, EXPIRY_DATE, PROCESS_CODE, MCC_CODE, TRACK_2_DATA, TERMINAL_ID, RESPONSE_CODE, RESPONSE_DATA, AUTH_CODE, BILLING_CURRENCY, BILLING_AMOUNT, SETTLEMENT_CURRENCY, SETTLEMENT_AMOUNT, REQUESTED_CURRENCY, REQUESTED_AMOUNT, SETTLEMENT_RATE, SETTLEMENT_DATE, SETTLEMENT_RATE_DATE, SETTLEMENT_FEE, PROCESSING_FEE, POS_ENTRY, POS_DATA, INF_DATA, ORIGINAL_DATA, REPLACEMENT_AMOUNT, REASON_CODE, MERCHANT_ID, MERCHANT_NAME, ECOM_SECURITY_LEVEL, CVC_INVALID, CASHBACK_AMOUNT, EXTERNAL_REF, TRANSACTION_ID, TRANSACTION_LINK_ID, HOSTNAME, RESPONSE_CODE_INTERNAL, CLEARING_STATUS, STATISTIC_STATUS) 
   Values(540451165, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:32','YYYYMMDD HH24:MI:SS'), 'BPR_HST_ISS',NVL(TRIM(v_date), '20221128'),'10:24:32','00000111', 0, 0, '0210', TO_DATE(NVL(TRIM(v_date), '20221128') || ' 10:24:27','YYYYMMDD HH24:MI:SS'), TO_DATE(NVL(TRIM(v_date), '20221128') || ' 10:24:27','YYYYMMDD HH24:MI:SS'), '332102427826','000825', '00000000111','00000000000', '999', Null, Null, '5155065300003006', '', '200000', '', '', 'E0000156', '00', '', 'S00928', '', '', '', '', '978', '100.00', '', Null, Null, '', '', '012','', '00DE52:N/DE48.43:N/AVS_DATA:N/DE63.PY:N/DE63.AR:N/DE63.LG:N/DE63.CA:N/DE63.AD:N/DE63.IT:N/DE63.IA:N/DE63.GS:N/BW_DST:060/CVC2_RC:M/MERC_RC:06/', '','', '', '000000000000156','Pilot POS3               Musterstadt  DE', '', '','', '','63847e48-1e18591ca8-4e0087', '63847e48-1e18591ca8-4e0087', '8c756a3eca27','', '', '');
  INSERT INTO COS_BPR_DATA (BPR_LOG_ID, RECORD_DATE, BPR_TYPE_NAME, BW3_RECORD_DATE, BW3_RECORD_TIME, INSTITUTION_NUMBER, TRANSACTION_ID_OLD, TRANSACTION_LINK_ID_OLD, MESSAGE_TYPE, TRANSACTION_DATE, TRANSMISSION_DATE, RETRIEVAL_REFERENCE, STAN, ACQUIRING_INST_ID, FORWARDING_INST_ID, TRANSACTION_STATUS, NETWORK_ID, BATCH_ID, CARD_NUMBER, EXPIRY_DATE, PROCESS_CODE, MCC_CODE, TRACK_2_DATA, TERMINAL_ID, RESPONSE_CODE, RESPONSE_DATA, AUTH_CODE, BILLING_CURRENCY, BILLING_AMOUNT, SETTLEMENT_CURRENCY, SETTLEMENT_AMOUNT, REQUESTED_CURRENCY, REQUESTED_AMOUNT, SETTLEMENT_RATE, SETTLEMENT_DATE, SETTLEMENT_RATE_DATE, SETTLEMENT_FEE, PROCESSING_FEE, POS_ENTRY, POS_DATA, INF_DATA, ORIGINAL_DATA, REPLACEMENT_AMOUNT, REASON_CODE, MERCHANT_ID, MERCHANT_NAME, ECOM_SECURITY_LEVEL, CVC_INVALID, CASHBACK_AMOUNT, EXTERNAL_REF, TRANSACTION_ID, TRANSACTION_LINK_ID, HOSTNAME, RESPONSE_CODE_INTERNAL, CLEARING_STATUS, STATISTIC_STATUS) 
   Values(540451163, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:31','YYYYMMDD HH24:MI:SS'), 'BPR_MCR_FSDE_ACQ',NVL(TRIM(v_date), '20221128'),'10:24:31','00000111', 0, 0, '0100', TO_DATE(NVL(TRIM(v_date), '20221128') || ' 10:24:27','YYYYMMDD HH24:MI:SS'), TO_DATE(NVL(TRIM(v_date), '20221128') || ' 09:24:31','YYYYMMDD HH24:MI:SS'), '332102427826','508621', '00000020851','00000XXXXXX', '999', Null, Null, '5155065300003006', '2212', '200000', '5999', '', 'E0000156', '', '', '', '', '', '', '', '978', '100.00', '', Null, Null, '', '', '812','102510000660028060000     ', '00TCC: /DE48.42:0103210/DE48.43:N/DE48.61:00001/DE48.92:Y/DE52:N/BIN_CNTRY:DE/PAN_SVC:001/', '','', '', '000000000000156','Pilot POS3             Musterstadt   DEU', '', '','', '','63847e4f-fa0f547348-568c50', '63847e48-1e18591ca8-4e0087', '8c756a3eca27','', '', '');
  INSERT INTO COS_BPR_DATA (BPR_LOG_ID, RECORD_DATE, BPR_TYPE_NAME, BW3_RECORD_DATE, BW3_RECORD_TIME, INSTITUTION_NUMBER, TRANSACTION_ID_OLD, TRANSACTION_LINK_ID_OLD, MESSAGE_TYPE, TRANSACTION_DATE, TRANSMISSION_DATE, RETRIEVAL_REFERENCE, STAN, ACQUIRING_INST_ID, FORWARDING_INST_ID, TRANSACTION_STATUS, NETWORK_ID, BATCH_ID, CARD_NUMBER, EXPIRY_DATE, PROCESS_CODE, MCC_CODE, TRACK_2_DATA, TERMINAL_ID, RESPONSE_CODE, RESPONSE_DATA, AUTH_CODE, BILLING_CURRENCY, BILLING_AMOUNT, SETTLEMENT_CURRENCY, SETTLEMENT_AMOUNT, REQUESTED_CURRENCY, REQUESTED_AMOUNT, SETTLEMENT_RATE, SETTLEMENT_DATE, SETTLEMENT_RATE_DATE, SETTLEMENT_FEE, PROCESSING_FEE, POS_ENTRY, POS_DATA, INF_DATA, ORIGINAL_DATA, REPLACEMENT_AMOUNT, REASON_CODE, MERCHANT_ID, MERCHANT_NAME, ECOM_SECURITY_LEVEL, CVC_INVALID, CASHBACK_AMOUNT, EXTERNAL_REF, TRANSACTION_ID, TRANSACTION_LINK_ID, HOSTNAME, RESPONSE_CODE_INTERNAL, CLEARING_STATUS, STATISTIC_STATUS) 
   Values(540451164, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:32','YYYYMMDD HH24:MI:SS'), 'BPR_MCR_FSDE_ACQ',NVL(TRIM(v_date), '20221128'),'10:24:32','00000111', 0, 0, '0110', TO_DATE(NVL(TRIM(v_date), '20221128') || ' ','YYYYMMDD HH24:MI:SS'), TO_DATE(NVL(TRIM(v_date), '20221128') || ' 09:24:31','YYYYMMDD HH24:MI:SS'), '332102427826','508621', '00000020851','00000XXXXXX', '999', Null, Null, '5155065300003006', '', '200000', '', '', 'E0000156', '00', '', 'S00928', '', '', '', '', '978', '100.00', '', Null, Null, '', '', '','102510000660028060000     ', '00TCC: /DE15:1128/DE48.42:0103210/DE48.43:N/DE48.87:M/DE48.92:N/DE52:N/DE63:MCS000927/BIN_CNTRY:DE/PAN_SVC:001/', '','', '', '','', '', '','', '','63847e4f-fa0f547348-568c50', '63847e48-1e18591ca8-4e0087', '8c756a3eca27','', '', '');
  Commit;
  INSERT INTO COS_EMV_LOG (BPR_LOG_ID, RECORD_DATE, BPR_TYPE_NAME, APPLICATION_INTER_PROFILE, DEDICATED_FILE_NAME, APPLICATION_TRAN_COUNTER, CARD_VERIFICATION_RESULTS, CARD_SEQUENCE_NUMBER, TERMINAL_APPL_VER_NUMBER, TERM_VERIFICATION_RESULTS, TERMINAL_TRANSACTION_DATE, TERMINAL_CAPABILITY_PROFILE, TERMINAL_COUNTRY_CODE, TERMINAL_SERIAL_NUMBER, TERMINAL_TYPE, AUTHORIZED_AMOUNT, AUTHORIZED_CURRENCY, TRANS_CATEGORY_CODE, TRANS_SEQUENCE_NUMBER, CRYPTOGRAM_VERSION, CRYPTOGRAM, CRYPTOGRAM_TRANSACTION_TYPE, CRYPTOGRAM_CASHBACK_AMOUNT, DERIVATION_KEY_INDEX, UNPREDICTABLE_NUMBER, AUTH_RESP_CRYPTOGRAM_CODE, AUTH_RESP_CRYPTOGRAM, ISSUER_SCRIPT_1_RESULTS, ISSUER_DISCRETIONARY_DATA, SCRIPT_PRESENT, FORM_FACTOR_IND, INSTITUTION_NUMBER, TRANSACTION_LINK_ID) 
   Values(540451162, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:27','YYYYMMDD HH24:MI:SS'),'BPR_HST_ISS', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '00000111','63847e48-1e18591ca8-4e0087');
  INSERT INTO COS_EMV_LOG (BPR_LOG_ID, RECORD_DATE, BPR_TYPE_NAME, APPLICATION_INTER_PROFILE, DEDICATED_FILE_NAME, APPLICATION_TRAN_COUNTER, CARD_VERIFICATION_RESULTS, CARD_SEQUENCE_NUMBER, TERMINAL_APPL_VER_NUMBER, TERM_VERIFICATION_RESULTS, TERMINAL_TRANSACTION_DATE, TERMINAL_CAPABILITY_PROFILE, TERMINAL_COUNTRY_CODE, TERMINAL_SERIAL_NUMBER, TERMINAL_TYPE, AUTHORIZED_AMOUNT, AUTHORIZED_CURRENCY, TRANS_CATEGORY_CODE, TRANS_SEQUENCE_NUMBER, CRYPTOGRAM_VERSION, CRYPTOGRAM, CRYPTOGRAM_TRANSACTION_TYPE, CRYPTOGRAM_CASHBACK_AMOUNT, DERIVATION_KEY_INDEX, UNPREDICTABLE_NUMBER, AUTH_RESP_CRYPTOGRAM_CODE, AUTH_RESP_CRYPTOGRAM, ISSUER_SCRIPT_1_RESULTS, ISSUER_DISCRETIONARY_DATA, SCRIPT_PRESENT, FORM_FACTOR_IND, INSTITUTION_NUMBER, TRANSACTION_LINK_ID) 
   Values(540451165, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:32','YYYYMMDD HH24:MI:SS'),'BPR_HST_ISS', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '00000111','63847e48-1e18591ca8-4e0087');
  INSERT INTO COS_EMV_LOG (BPR_LOG_ID, RECORD_DATE, BPR_TYPE_NAME, APPLICATION_INTER_PROFILE, DEDICATED_FILE_NAME, APPLICATION_TRAN_COUNTER, CARD_VERIFICATION_RESULTS, CARD_SEQUENCE_NUMBER, TERMINAL_APPL_VER_NUMBER, TERM_VERIFICATION_RESULTS, TERMINAL_TRANSACTION_DATE, TERMINAL_CAPABILITY_PROFILE, TERMINAL_COUNTRY_CODE, TERMINAL_SERIAL_NUMBER, TERMINAL_TYPE, AUTHORIZED_AMOUNT, AUTHORIZED_CURRENCY, TRANS_CATEGORY_CODE, TRANS_SEQUENCE_NUMBER, CRYPTOGRAM_VERSION, CRYPTOGRAM, CRYPTOGRAM_TRANSACTION_TYPE, CRYPTOGRAM_CASHBACK_AMOUNT, DERIVATION_KEY_INDEX, UNPREDICTABLE_NUMBER, AUTH_RESP_CRYPTOGRAM_CODE, AUTH_RESP_CRYPTOGRAM, ISSUER_SCRIPT_1_RESULTS, ISSUER_DISCRETIONARY_DATA, SCRIPT_PRESENT, FORM_FACTOR_IND, INSTITUTION_NUMBER, TRANSACTION_LINK_ID) 
   Values(540451164, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:32','YYYYMMDD HH24:MI:SS'),'BPR_MCR_FSDE_ACQ', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '00000111','63847e48-1e18591ca8-4e0087');
  INSERT INTO COS_EMV_LOG (BPR_LOG_ID, RECORD_DATE, BPR_TYPE_NAME, APPLICATION_INTER_PROFILE, DEDICATED_FILE_NAME, APPLICATION_TRAN_COUNTER, CARD_VERIFICATION_RESULTS, CARD_SEQUENCE_NUMBER, TERMINAL_APPL_VER_NUMBER, TERM_VERIFICATION_RESULTS, TERMINAL_TRANSACTION_DATE, TERMINAL_CAPABILITY_PROFILE, TERMINAL_COUNTRY_CODE, TERMINAL_SERIAL_NUMBER, TERMINAL_TYPE, AUTHORIZED_AMOUNT, AUTHORIZED_CURRENCY, TRANS_CATEGORY_CODE, TRANS_SEQUENCE_NUMBER, CRYPTOGRAM_VERSION, CRYPTOGRAM, CRYPTOGRAM_TRANSACTION_TYPE, CRYPTOGRAM_CASHBACK_AMOUNT, DERIVATION_KEY_INDEX, UNPREDICTABLE_NUMBER, AUTH_RESP_CRYPTOGRAM_CODE, AUTH_RESP_CRYPTOGRAM, ISSUER_SCRIPT_1_RESULTS, ISSUER_DISCRETIONARY_DATA, SCRIPT_PRESENT, FORM_FACTOR_IND, INSTITUTION_NUMBER, TRANSACTION_LINK_ID) 
   Values(540451163, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:31','YYYYMMDD HH24:MI:SS'),'BPR_MCR_FSDE_ACQ', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '','', '', '00000111','63847e48-1e18591ca8-4e0087');
  Commit;
  INSERT INTO COS_BPR_LOG (BPR_LOG_ID, RECORD_DATE, TRANSACTION_LINK_ID) 
   Values(540451164, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:32','YYYYMMDD HH24:MI:SS'), '63847e48-1e18591ca8-4e0087');
  UPDATE COS_BPR_LOG Set MSG_DATA_JSON = hextoraw(''
    || '7B22686472223A7B22737263223A224144545F4D43525F465344452F3863373536613365636132372F31222C22647374223A224250525F4D43525F465344455F4143512F3863373536613365636132372F31222C22616774223A22222C2274797065223A362C2274746C223A322C22727465223A352C22737473223A342C2273697A65223A3233382C22666C6473223A3131392C226D61785F74696D65223A31302C226964223A2236333834376535302D323966323931353135662D373830353539222C226474223A7B2273223A313636393632373437322C227573223A3232353237337D2C2274785F6474223A7B2273223A302C227573223A307D2C2274726E5F6964223A2236333834376534662D666130663534373334382D353638633530222C226C6E6B5F6964223A2236333834376534382D316531383539316361382D346530303837222C22666C6773223A302C227573725F666C6773223A302C22746D6F223A307D2C226D7367223A7B226D7469223A2230313130222C22736967223A2247454E303053544430304D43523030222C22637264223A7B2270616E223A2220202020202020202020202020202020227D2C2274797065223A223230222C2266725F696478223A223030222C22746F5F696478223A223030222C2266696E223A7B22616D74223A22303030303030303130303030222C2266785F626C223A223030303030303030222C2273745F6474223A2231313238222C22636379223A22393738227D2C2274785F6474223A2231313238303932343331222C227374616E223A22353038363231222C2261715F6964223A223230383531222C2266775F6964223A22585858585858222C2272726E223A22333332313032343237383236222C22617574685F6364223A22533030393238222C227263223A223030222C22706F73223A7B226964223A224530303030313536227D2C226D6372223A7B2264653633223A224D4353303030393237222C22746363223A2220227D2C22766970223A7B22637663325F646174223A224D227D2C2265636F6D223A7B22736563223A2230313033323130227D7D7D'
) WHERE BPR_LOG_ID = '540451164' and TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087' and RECORD_DATE = to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:32','YYYYMMDD HH24:MI:SS');
  INSERT INTO COS_BPR_LOG (BPR_LOG_ID, RECORD_DATE, TRANSACTION_LINK_ID) 
   Values(540451162, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:27','YYYYMMDD HH24:MI:SS'), '63847e48-1e18591ca8-4e0087');
  UPDATE COS_BPR_LOG Set MSG_DATA_JSON = hextoraw(''
    || '7B22686472223A7B226474223A7B227573223A22353635353539222C2273223A2231363639363237343634227D2C22737473223A302C22737263223A224144545F4853542F3863373536613365636132372F31222C2274746C223A322C22727465223A342C226C6E6B5F6964223A2236333834376534382D316531383539316361382D346530303837222C2274797065223A362C226B6579223A224250525F4853545F4953533030303030303030313131303030303030303030303031313238313032343237303030383235222C22647374223A224250525F4853545F4953532F3863373536613365636132372F31222C226964223A2236333834376534382D376162616565643561642D346530303836227D2C226D7367223A7B2272726E223A22333332313032343237383236222C226D657263223A7B226D6363223A2235393939222C2263747279223A224445222C226E616D65223A2250696C6F7420504F5333202020202020202020202020202020222C2263697479223A224D757374657273746164742020222C226964223A22303030303030303030303030313536227D2C226D7469223A2230323030222C2265636F6D223A7B22736563223A22323130227D2C2274696D65223A22313032343237222C2266725F696478223A223030222C22706F73223A7B2270696E5F636170223A2232222C22636F6E64223A223539222C2270616E5F696E223A223031222C22646174223A223130303030303030222C226964223A224530303030313536227D2C22746F5F696478223A223030222C22747064755F686561646572223A223030303030303030333033303330333130313030222C2274797065223A223230222C227374616E223A22303030383235222C2266696E223A7B22616D74223A22303030303030303130303030222C22636379223A22393738227D2C2274785F6474223A2231313238313032343237222C2264617465223A2231313238222C2261715F6964223A223030303030313131222C22637264223A7B2263766332223A222A2A2A222C22657870223A2232323132222C2270616E223A222A2A2A2A2A2A2A2A2A2A2A2A2A2A2A2A227D7D7D'
) WHERE BPR_LOG_ID = '540451162' and TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087' and RECORD_DATE = to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:27','YYYYMMDD HH24:MI:SS');
  INSERT INTO COS_BPR_LOG (BPR_LOG_ID, RECORD_DATE, TRANSACTION_LINK_ID) 
   Values(540451165, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:32','YYYYMMDD HH24:MI:SS'), '63847e48-1e18591ca8-4e0087');
  UPDATE COS_BPR_LOG Set MSG_DATA_JSON = hextoraw(''
    || '7B22686472223A7B226474223A7B227573223A22323335363733222C2273223A2231363639363237343732227D2C22737473223A302C22737263223A224250525F4853545F4953532F3863373536613365636132372F31222C226964223A2236333834376535302D366539306336616337342D323539396638222C22727465223A302C226C6E6B5F6964223A2236333834376534382D316531383539316361382D346530303837222C2274746C223A302C2274797065223A367D2C226D7367223A7B2270796D74223A7B2261636374223A7B7D7D2C2272726E223A22333332313032343237383236222C226277223A7B22696E7374223A223030303030313131227D2C22747064755F686561646572223A223030303030303030333033303330333130313030222C227374616E223A22303030383235222C2266696E223A7B22636379223A22393738222C22616D74223A22303030303030303130303030227D2C2274785F6474223A2231313238313032343237222C226D657263223A7B227263223A223036227D2C22637264223A7B22617673223A7B7D2C22637663325F7263223A224D222C2270616E223A222A2A2A2A2A2A2A2A2A2A2A2A2A2A2A2A227D2C2274797065223A223230222C226F726967223A7B7D2C2274696D65223A22313032343237222C22746F5F696478223A223030222C22656D76223A7B7D2C2264617465223A2231313238222C22706F73223A7B226964223A224530303030313536227D2C2265636F6D223A7B7D2C22626174223A7B7D2C22617574685F6364223A22533030393238222C22746B6E223A7B7D2C2266725F696478223A223030222C2261715F6964223A223030303030313131222C226E6574223A7B7D2C226D7469223A2230323130222C227263223A223030227D7D'
) WHERE BPR_LOG_ID = '540451165' and TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087' and RECORD_DATE = to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:32','YYYYMMDD HH24:MI:SS');
  INSERT INTO COS_BPR_LOG (BPR_LOG_ID, RECORD_DATE, TRANSACTION_LINK_ID) 
   Values(540451163, to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:31','YYYYMMDD HH24:MI:SS'), '63847e48-1e18591ca8-4e0087');
  UPDATE COS_BPR_LOG Set MSG_DATA_JSON = hextoraw(''
    || '7B22686472223A7B22737263223A224250525F4D43525F465344455F4143512F3863373536613365636132372F31222C22647374223A224144545F4D43525F46534445222C22616774223A22222C2274797065223A362C2274746C223A322C22727465223A342C22737473223A342C2273697A65223A3239332C22666C6473223A3131392C226D61785F74696D65223A31302C226964223A2236333834376534662D666431373763653131312D353638633539222C226474223A7B2273223A313636393632373437312C227573223A3937373232387D2C2274785F6474223A7B2273223A302C227573223A307D2C2274726E5F6964223A2236333834376534662D666130663534373334382D353638633530222C226C6E6B5F6964223A2236333834376534382D316531383539316361382D346530303837222C22666C6773223A322C227573725F666C6773223A302C22746D6F223A307D2C226D7367223A7B226D7469223A2230313030222C22736967223A2247454E30305354443030222C22637264223A7B2270616E223A2220202020202020202020202020202020222C22657870223A2232323132222C2263766332223A22202020227D2C2274797065223A223230222C2266725F696478223A223030222C22746F5F696478223A223030222C2266696E223A7B22616D74223A22303030303030303130303030222C22636379223A22393738227D2C2274785F6474223A2231313238303932343331222C227374616E223A22353038363231222C2274696D65223A22313032343237222C2264617465223A2231313238222C226D657263223A7B226D6363223A2235393939222C226964223A22303030303030303030303030313536222C226E616D65223A2250696C6F7420504F533320202020202020202020202020222C2263697479223A224D75737465727374616474202020222C2263747279223A22444555227D2C22706F73223A7B2270616E5F696E223A223831222C2270696E5F636170223A2232222C226964223A224530303030313536222C2263747279223A22323830222C227073746364223A2236303030302020202020227D2C2261715F6964223A223230383531222C2266775F6964223A22585858585858222C2272726E223A22333332313032343237383236222C226D6372223A7B2264653438223A7B2273663631223A223030303031227D2C2264653631223A7B22736631223A2231222C22736632223A2230222C22736633223A2232222C22736634223A2235222C22736635223A2231222C22736636223A2230222C22736637223A2230222C22736638223A2230222C22736639223A2230222C2273663130223A2236222C2273663131223A2236222C227366'
    || '3132223A223030227D2C22746363223A2220227D2C2265636F6D223A7B22736563223A2230313033323130227D7D7D'
) WHERE BPR_LOG_ID = '540451163' and TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087' and RECORD_DATE = to_timestamp(NVL(TRIM(v_date), '20221128') || ' 10:24:31','YYYYMMDD HH24:MI:SS');
  Commit;
INSERT INTO COS_RISK_LOG (RISK_LOG_ID, RECORD_DATE, BW3_RECORD_DATE, BW3_RECORD_TIME, BPR_TYPE_NAME, BPR_TYPE_NAME_SRC, PROCESSING_STATUS, RISK_RESPONSE, INSTITUTION_NUMBER, FORWARDING_INST_ID, TRANSACTION_LINK_ID, MESSAGE_TYPE, RETRIEVAL_REFERENCE, REQUESTED_CURRENCY, REQUESTED_AMOUNT, CARD_NUMBER, MCC_CODE, TERMINAL_ID, MERCHANT_ID, HOSTNAME, BIN_COUNTRY, MSG_DATA_JSON, START_RECORD_DATE, TRANSACTION_RESPONSE_CODE, INF_DATA) 
 Values(12358069, to_timestamp(v_date || ' 10:24:32','YYYYMMDD HH24:MI:SS'), v_date, '10:24:32','BPR_RISK_BWAPI','BPR_HST_ISS','022','001','00000111','',
 '63847e48-1e18591ca8-4e0087','R0100','332102427826','978','100.00','5155065300003006','5999','E0000156','000000000000156',
 '8c756a3eca27','280','', to_timestamp(v_date || '10:24:32','YYYYMMDD HH24:MI:SS'), '','');
UPDATE COS_RISK_LOG Set MSG_DATA_JSON = hextoraw(''
    || '7B22686472223A7B22737263223A224250525F5249534B5F414354494F4E2F3863373536613365636132372F31222C2274797065223A362C226964223A2236333834376534652D313534646330313830342D616338346566222C226C6E6B5F6964223A2236333834376534382D316531383539316361382D346530303837227D2C226D7367223A7B226277223A7B22737263223A22303135222C22617574685F696E737472223A224250525F4853545F495353222C22696E7374223A223030303030313131227D2C2269736F5F6D7469223A2230323030222C226E6574223A7B7D2C227263223A22303030222C2266696E223A7B22636379223A22393738222C22616D745F626C223A22303030303030303130303030222C22616D74223A22303030303030303130303030222C226363795F626C223A22393738227D2C22746F5F696478223A223030222C22637264223A7B22657870223A2232323132222C2263766332223A222A2A2A222C2270616E223A2235313535303635333030303033303036227D2C227374616E223A22303030383235222C2264617465223A2231313238222C226F726967223A7B7D2C226D7469223A225230313030222C2272726E223A22333332313032343237383236222C226D657263223A7B2263747279223A224445222C226D6363223A2235393939222C2263697479223A224D757374657273746164742020222C226E616D65223A2250696C6F7420504F5333202020202020202020202020202020222C226964223A22303030303030303030303030313536227D2C22626174223A7B7D2C2274797065223A223230222C22706F73223A7B22646174223A223130303030303030222C2270616E5F696E223A223031222C2270696E5F636170223A2232222C226465765F6361705F696478223A22303031222C22636F6E64223A223539222C226964223A224530303030313536227D2C2265636F6D223A7B22736563223A22323130227D2C2274696D65223A22313032343237222C2274785F6474223A2231313238313032343237222C2266725F696478223A223030227D7D'
) WHERE RISK_LOG_ID = '12358069' and TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087';
INSERT INTO COS_RISK_LOG (RISK_LOG_ID, RECORD_DATE, BW3_RECORD_DATE, BW3_RECORD_TIME, BPR_TYPE_NAME, BPR_TYPE_NAME_SRC, PROCESSING_STATUS, RISK_RESPONSE, INSTITUTION_NUMBER, FORWARDING_INST_ID, TRANSACTION_LINK_ID, MESSAGE_TYPE, RETRIEVAL_REFERENCE, REQUESTED_CURRENCY, REQUESTED_AMOUNT, CARD_NUMBER, MCC_CODE, TERMINAL_ID, MERCHANT_ID, HOSTNAME, BIN_COUNTRY, MSG_DATA_JSON, START_RECORD_DATE, TRANSACTION_RESPONSE_CODE, INF_DATA) 
 Values(12358070, to_timestamp(v_date || ' 10:24:32','YYYYMMDD HH24:MI:SS'), v_date, '10:24:32','BPR_RISK_BWAPI','BPR_HST_ISS','003','001','00000111',
 '','63847e48-1e18591ca8-4e0087','R0120','332102427826','978','100.00','5155065300003006','5999','E0000156','000000000000156',
 '8c756a3eca27','280','', to_timestamp(v_date || '10:24:32','YYYYMMDD HH24:MI:SS'),
 '','REQ_AMT:100.00/BL_AMT:100.00/BW3_DT:20221128/CRD_BRAND:010/BIN_CNTRY:DE/CRD_ORG:/CRD_SVC:001/');
UPDATE COS_RISK_LOG Set MSG_DATA_JSON = hextoraw(''
    || '7B22686472223A7B2274746C223A302C22737263223A224250525F5249534B5F414354494F4E2F3863373536613365636132372F31222C2274797065223A362C226474223A7B2273223A2231363639363237343732222C227573223A22323334303031227D2C226964223A2236333834376535302D313534646330313830342D616338346631222C226C6E6B5F6964223A2236333834376534382D316531383539316361382D346530303837222C22737473223A307D2C226D7367223A7B226277223A7B22617574685F696E737472223A224250525F4853545F4953532F4250525F5249534B5F4257415049222C22696E7374223A223030303030313131227D2C2269736F5F6D7469223A2230323030222C226E6574223A7B7D2C227263223A22303030222C2266696E223A7B22636379223A22393738222C22616D745F626C223A22303030303030303130303030222C22616D74223A22303030303030303130303030222C226363795F626C223A22393738227D2C22746F5F696478223A223030222C22637264223A7B22657870223A2232323132222C226272616E64223A22303130222C227372765F74797065223A22303031222C22637663325F696E64223A224D222C22636E7472795F616E32223A224445222C2270616E223A2235313535303635333030303033303036227D2C2266725F696478223A223030222C2264617465223A2231313238222C226F726967223A7B7D2C226D7469223A225230313230222C2272726E223A22333332313032343237383236222C226D657263223A7B2263747279223A224445222C226E616D65223A2250696C6F7420504F5333202020202020202020202020202020222C226D6363223A2235393939222C226964223A22303030303030303030303030313536227D2C2274797065223A223230222C2265636F6D223A7B7D2C2274696D65223A22313032343237222C22626174223A7B7D2C22706F73223A7B22636F6E64223A223539222C226964223A224530303030313536222C2270616E5F696E223A223031222C2270696E5F636170223A2232227D7D7D'
) WHERE RISK_LOG_ID = '12358070' and TRANSACTION_LINK_ID = '63847e48-1e18591ca8-4e0087';
  Commit;
  UPDATE CIS_DEVICE_LINK Set  DATE_SETTLEMENT = '', TIME_SETTLEMENT = '' , EOD_indicator = '005' WHERE INSTITUTION_NUMBER = '00000111' AND TERMINAL_ID = 'E0000156' AND MERCHANT_ID = '000000000000156';
  Commit;
  update cht_eod_indicator set cut_off = to_char(sysdate,'HH24:MI') where institution_number = '00000111' and index_field = '005';
  Commit;
  dbms_output.put_line('Finished Successfully.');
Exception
  When Others Then
    dbms_output.put_line('******************************');
    dbms_output.put_line(sqlerrm);
    dbms_output.put_line(dbms_utility.format_error_backtrace);
    dbms_output.put_line('******************************');
    Rollback;
    Raise;
End;
/
--SCROLL TO THE TOP AND READ THE NOTES BEFORE YOU EXECUTE!!!
